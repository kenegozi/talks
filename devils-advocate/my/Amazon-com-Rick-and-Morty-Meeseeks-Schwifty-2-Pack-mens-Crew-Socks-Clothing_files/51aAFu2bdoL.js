(function(l,r,F){l.execute(function(){l.register("postMetric",function(){return{postCountMetric:function(l){if("undefined"!==typeof l){var d=r.ue;if(d){var e=d.count(l)||0;d.count(l,e+1)}}}}});l.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(C,d,e,h){e.extraVideos&&(h.videos=C.merge(e.extraVideos,h.videos),delete e.extraVideos);C=C.extend(!0,{},e,h);var b=new d(C);l.register("ImageBlockAPI",function(){return b.api});return b});
l.when("A","jQuery","ImageBlockBTF").register("ImageBlockAiryLoader",function(C,d,e){C=e.airyConfig;C.jsUrl&&l.load.js(C.jsUrl);C.cssUrl&&l.load.css(C.cssUrl)});l.when("A","jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(l,d,e,h,b,a){var c={};return function(g){var k=this;k.dispatch=function(a,e){var g=c[a];b.isDefined(g)&&d.each(g,function(a,b){b.call(r,e)})};k.register=function(a,d){b.isDefined(c[a])||(c[a]=[]);
"function"===typeof d&&c[a].push(d)};k.model=new e(g,k);k.view=new h(g,k,k.model);k.api=new a(g,k,k.model);k.init=function(){k.model.init();k.view.init()};k.init()}});l.when("A","jQuery","imageBlockUtils").register("ImageBlockModel",function(l,d,e){function h(a,b,c,d,f){e.isDefined(a)&&(n.type=a);e.isDefined(b)&&(n.index=b);e.isDefined(c)&&(n.thumbnailIndex=c);e.isDefined(d)&&(n.variant=d);e.isDefined(f)&&(n.color=f)}function b(a){h("image",0,0,"MAIN",a||k.landingAsinColor||k.defaultColor)}
function a(a){a=a.data;m=l.copy(n);h(a.type,a.index,a.thumbnailIndex,a.variant,a.color)}function c(b){a(b);b=l.copy(b);b.data=l.copy(n);f.dispatch("updateView",b)}function g(){m=l.copy(n);b(n.color)}var k,f,n={},m={},r;return function(d,e){f=e;k=d;f.register("updateSelection",c);f.register("updateModel",a);f.register("resetModel",g);this.init=function(){b()};this.getCurrentItem=function(){return l.copy(n)};this.getPreviousItem=function(){return l.copy(m)};this.setCurrentEvent=function(a){r=a};this.getCurrentEvent=
function(){return r}}});l.when("ImageBlockBTF").execute(function(C){function d(d,h,b,a,c){function g(a){"click"===a.type&&G.overrideAltImageClickAction?A.dispatch("thumbActionClick",a):A.dispatch("updateSelection",a)}function k(a){G.useClickZoom||A.dispatch("imageClick",a)}function f(a){G.useClickZoom||A.dispatch("imageHover",a)}function n(c){!b.isDefined(c)||"swatchClick"!==c.type&&"updatedData"!==c.type?(C.update(c),"swatchHover"!==c.type&&x.getPreviousItem().thumbnailIndex!==c.data.thumbnailIndex&&
a.postCountMetric(c.data.type+"ThumbnailSelected"),d.trigger("image-block-thumbnail-selected",c.data)):C.render(c.data.color,!1,c.onload)}function m(a){A.dispatch("resize",a)}function l(a){b.selectThumbnail(a,E)}function q(a){var b=a.data,c;b&&"ingress"!==b.type&&"click"===a.type&&(c=a);return c}function p(a){var b=x.getCurrentItem(),c={type:"click"};c.$declarativeParent=a;c.data=b;return c}var C,G,A,x,E;return function(a,b,H){C=this;G=a;A=b;x=H;E=h("#imageBlock #altImages ul");var B=h("#imageBlock .canvas"),
J=h("#main-image-container"),D;C.subViews=[];for(b=0;b<c.length;b++)C.subViews.push(new c[b](a,H,C,A));C.render=function(a,b,c){var d=0;E.find(".item").remove();a=a||x.getCurrentItem().color;h.each(C.subViews,function(e,f){d=f.render(a,d,B,E,J,b,c)||d});var e=E.find(".a-button-selected").closest(".a-declarative");D=p(e)};C.init=function(){E=h("#imageBlock #altImages ul");var a=E.find(".a-button-selected").closest(".a-declarative"),b=a.data("action"),a=a.data(b)||{};a.color=G.landingAsinColor||G.defaultColor;
A.dispatch("updateModel",{data:a});C.render(a.color,!0);G.isDebug&&r.console&&console.log(G);A.register("updateView",n);A.register("selectThumbnail",l);G.disableHoverOnAltImages||d.declarative("thumb-action",["mouseenter","mouseleave"],g);d.declarative("thumb-action",["click"],g);d.declarative("main-image-click",["click"],k);d.declarative("main-image-click",["mouseenter","mouseleave"],f);h(r).resize(m)};C.update=function(a){h.each(C.subViews,function(b,c){c.update(a)});G.usePeekHover&&("mouseleave"===
a.type?A.dispatch("updateSelection",D):"click"===a.type&&(D=q(a)||D))}}}C=["A","jQuery","imageBlockUtils","postMetric"].concat(C.views);l.when.apply(l,C).register("ImageBlockView",function(){for(var e=arguments[0],h=arguments[1],b=arguments[2],a=arguments[3],c=[],g=4,k=arguments.length;g<k;g++)c.push(arguments[g]);return d(e,h,b,a,c)})});l.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric").register("ImageBlockAltImageView",function(C,d,e,h,b){function a(a,b,c,f){if(!e.isjQueryObjDefined(a.find(".a-button-selected"))){var g=
z.getCurrentItem();if(!f||"chromeless-video"!==g.type||!t.autoplayVideo){f=0;"image"===g.type&&(f=Math.max(k(g.color,g.variant),0));var h=b+f;h>=c&&(f=0,h=b);b=e.getImageHash(g.color,f,t);-1!==b&&(H.dispatch("updateModel",{data:{index:f,thumbnailIndex:h,variant:b.variant,type:"image"}}),b=a.find(".item").get(h),e.selectGivenThumbnail(d(b),a))}}}function c(b,c,f){c=t.colorImages&&t.colorImages[c];var g=b;e.isDefined(c)&&(d.each(c,function(a,c){b<t.maxAlts&&(e.createThumbnail({type:"image",index:a,
thumbnailIndex:b,variant:c.variant},c.thumb,B),b++)}),a(B,g,b,f));return b}function g(a,b){if("image"===a.type){var c=d("#image-canvas-caption #canvasCaption"),e,f=t.staticStrings,g=t.colorImages,h=a.color,k=a.index;b&&t.useIV?e=f.clickToExpand:g[h]&&g[h][k].hiRes&&t.useHoverZoom?(e=t.useHoverZoomIpad?f.touchToZoom:t.useClickZoom?f.clickToZoom:f.rollOverToZoom,t.hoverZoomIndicator&&(e="<img src='"+t.staticImages.hoverZoomIcon+"'/>&nbsp;"+e)):t.useIV&&(e=f.clickToExpand);c.html(e)}}function k(a,b){return e.getIndexForVariant(a,
b,t)}function f(a,b){var c;d.each(a.main,function(a,b){e.isDefined(c)||(c=parseFloat(b[1]/b[0])<=parseFloat(t.holderRatio)?"a-stretch-vertical":"a-stretch-horizontal")});var f="a-dynamic-image "+c,g=e.getMaxDimensionsOfMainImage(a.main,D,t),h=g[0],k=g[1],g=d("<div></div>"),h={"max-height":h,"max-width":k};g.addClass(f).css(h).attr({"data-old-hires":a.hiRes,"data-a-manual-replacement":"true",onload:b}).data("a-dynamic-image",a.main);return g}function n(a){var b=J.find(".swatchHoverExp");a=f(a);b.find(".imgTagWrapper").html(a);
C.loadImageManually(a);return b}function m(a){var b=D.css("height");null!==b&&a.find(".imgTagWrapper").css("height",b);a.addClass("selected");t.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(t.imgTagWrapperClasses)}function r(a,c){if("image"===a.type||"unavailable"===a.type||"lazy-loaded"===a.type){var d=e.getImageHash(a.color,a.index,t);if(-1===d)return d={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},e.lazyLoadingRequired(a,z,t)?v(a,!1,c):(H.dispatch("updateModel",d),e.showUnavailable(a.color)),
-1;var h=J.find(".item.itemNo"+a.thumbnailIndex);if(!e.isjQueryObjDefined(h)){var h=a.thumbnailIndex,h=J.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate").addClass("image item itemNo"+h+" maintain-height"),k=f(d,c);h.find(".placeHolder").replaceWith(k);J.find(".list").append(h);C.loadImageManually(k)}m(h);H.dispatch("loadMagnifier");g(a);t.useIV&&e.isDefined(d.hiRes)&&h.css("cursor","pointer");a.isUserGenerated&&(h=z.getPreviousItem(),k=a.variant,e.isDefined(k)&&h.thumbnailIndex!==
a.thumbnailIndex&&(b.postCountMetric("ImageThumbnailSelectedVariant:"+k),0===k.indexOf("IG")&&(b.postCountMetric("IGImageSelectedVariant:"+k),b.postCountMetric("IGImageSelectedEvent:"+a.interaction))));C.trigger("dp:image-block:update",d)}}function q(a){var b=Math.max(k(a.color,z.getCurrentItem().variant),0),b=e.getImageHash(a.color,b,t);if(-1===b)return e.lazyLoadingRequired(a,z,t)?e.lazyLoadOnHoverEnabled(t)&&(p(".3",!0),e.spinner(J,!0),C.delay(function(){z.getCurrentEvent().data===a&&v(a,!0)},
500)):e.showUnavailable(a.color),-1;var c=n(b);m(c);C.trigger("dp:image-block:update",b)}function p(a,b){b?J.css("opacity",a):d("#imageBlock").css("opacity",a)}function v(a,b,c){F=b;M=c;var d=a.color,f=t.colorToAsin[d];if(f&&f.asin){var g={};g.params={asin:f.asin,productGroupID:t.productGroupID,color:d};g.success=function(g){g?(e.ajaxState(f.asin,"success"),t.colorImages[d]=g.colorImage,d===a.color&&(b&&F?a===z.getCurrentEvent().data&&(G(a),q(a)):(g={type:"updatedData",data:z.getCurrentItem(),onload:c||
M},H.dispatch("updateView",g))),l.register(e.rankedImagesReadyEvent(f.asin))):e.ajaxState(f.asin,"fail")};g.error=function(){e.ajaxState(f.asin,"fail")};g.indicator=e.spinner(J);e.ajaxState(f.asin,void 0)&&"fail"!==e.ajaxState(f.asin,void 0)||(p(".3",b),h.load("/gp/product/features/apparel-main-image/ranked-images.html",g),e.ajaxState(f.asin,"sent"));return t.colorImages&&t.colorImages[d]}}function G(a,b){e.lazyLoadingRequired(a,z,t)||(d("#imageBlock").css("opacity","1"),J.css("opacity","1"),e.spinner(J,
!1),J.find("li").removeClass("selected"),d("#image-canvas-caption #canvasCaption").empty(),e.hideUnavailable(),b&&J.find(".list .item").remove())}function A(){var a=J.find(".item .imgTagWrapper"),b=e.getContainerHeight(D,t.holderRatio,t.holderMaxHeight);0<b&&(D.height(b),a.height(b));J.find("img.a-dynamic-image").each(function(){var a=d(this);a.data("a-manual-replacement")&&C.loadDynamicImage(this);var b=a.data("a-dynamic-image"),b=e.getMaxDimensionsOfMainImage(b,D,t);a.css({"max-height":b[0]+"px",
"max-width":b[1]+"px"})})}function x(a){g(z.getCurrentItem(),"mouseenter"===a.type)}var E,t,z,H,B,J,D,F,M;return function(a,b,d,f){E=this;t=a;z=b;H=f;t.colorImages[t.landingAsinColor]=t.colorImages[t.defaultColor];E.render=function(a,b,d,f,g,h,k){J=d;B=f;D=g;a=c(b,a,h);h||(b=z.getCurrentItem(),e.lazyLoadingRequired(b,z,t)&&H.dispatch("updateModel",{data:{type:"lazy-loaded"}}));G(z.getCurrentItem(),!h);r(z.getCurrentItem(),k);return a};E.update=function(a){var b=a.data;z.setCurrentEvent(a);"ingress"!==
b.type&&G(a.data,!1);"swatchHover"===a.type?b.color===z.getCurrentItem().color?r(z.getCurrentItem()):a.captured||-1===q(b)||(a.captured=!0):"image"===b.type&&(b.interaction=a.type,b.isUserGenerated=!0,r(b),t.usePeekHover&&"click"!==a.type||e.selectGivenThumbnail(a.$declarativeParent,B))};H.register("imageHover",x);H.register("resize",A)}});l.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockMagnifierView",function(l,d,e,h){function b(a){q?a.css("cursor","url('"+f.staticImages.zoomIn+
"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function a(a){var b=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(e.isDefined(b))for(var b=b[1].split("_"),c=0;c<b.length;c++){var d=b[c].match(/^([A-Z]+)(\d+(\.\d+)?)$/);e.isDefined(d)&&(a[d[1]]=parseInt(d[2],10))}return a}function c(c,g){function k(){var a;g.useClickZoom?(a=g.offsetInClickZoom,a=[Math.min(1,Math.max(0,F[0]-(N[0]+a))/(N[2]-2*a)),Math.min(1,Math.max(0,F[1]-(N[1]+a))/(N[3]-
2*a))]):a=D&&D.updatePosition();if(a&&J&&J.detailSize){var b=[J.detailSize[0]-J.rect.width,J.detailSize[1]-J.rect.height];J.detailImage.get(0).style.left=-(a[0]*b[0])+"px";J.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function m(a){var b=O?a.originalEvent.touches[0]||a.originalEvent.changedTouches[0]:"";F=O?[b.pageX,b.pageY]:[a.pageX,a.pageY]}function n(a){O&&a.preventDefault();m(a);g.useClickZoom?a=[N[0],N[1],N[0]+N[2],N[1]+N[3]]:(a=D?D.offset:c.offsetParent().offset(),a=[M[0]+a.left,M[1]+a.top,
M[0]+M[2]+a.left,M[1]+M[3]+a.top]);F[0]<a[0]||F[1]<a[1]||F[0]>=a[2]||F[1]>=a[3]?(g.fadeMagnifier?Z||(Z=!0,S=setTimeout(function(){l(!0)},500)):g.useClickZoom||l(),R&&(R=!1,clearTimeout(oa))):(R||(R=!0,oa=setTimeout(function(){h.postCountMetric("dppc_hoverZoomOpened")},1E3)),g.fadeMagnifier&&Z&&(Z=!1,clearTimeout(S)),k())}function l(a){a&&H.suppressMagnifier(!0);if(P&&(J&&J.hide(),D&&(D.destroy(),D=null),P=!1,O?(c.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),d(document).trigger("disengaged.magnifier")):
d(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),u(),a))c.one("click.magnifier touchstart.magnifier",function(a){C(a,!0)})}function C(a,b){b&&H.suppressMagnifier(!1);if(!P&&!V&&(0===U&&(h.postCountMetric("dppc_hoverTime",new Date-(r.ue&&r.ue.t0||0)),U=1),Q[K]||(h.postCountMetric("dppc_hoverMain"),Q[K]=1),M=[c.position().left,c.position().top,c.width(),c.height()],K&&(m(a),J?J.refit().show():J=new X,g.useClickZoom||(D=D||new L),N=J.getWindowSize(),k()),P=!0,O?(c.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",
n).bind("touchend.magnifier",l),d(document).trigger("engaged.magnifier")):(c.unbind("mousemove.magnifier"),d(document).trigger("engaged.magnifier").bind("mousemove.magnifier",n)),b)){var e=d("#zoomWindow");if(0<e.length)e.one("click.magnifier touchend.magnifier",function(a){l(!0)})}}function u(){g.useHoverZoom&&(O?c.bind("touchstart.magnifier touchmove.magnifier",C):c.bind("mousemove.magnifier",C))}var H=this,B={detailImageUrl:c.attr("data-old-hires"),location:"over",locationElement:c,prelaod:"ready",
zIndex:50,offsetInClickZoom:50};g=d.extend(B,g);g.adjustment=[10,0,-10,0];var J=null,D=null,F=null,M=null,N=null,I={"null":1,"":1,undefined:1},P=!1,V=!1,K=g.detailImageUrl,O=g.useHoverZoomIpad||0,U=0,Q={},L=function(){function a(b){var d=Math.round(Math.min(c.width(),J.rect.width/b));b=Math.round(Math.min(c.height(),J.rect.height/b));n.css({width:d,height:b});h=[d,b]}var e=this,h=[0,0],k=(J.detailSize&&J.detailSize[0]||5E8)/M[2],m=(J.detailSize&&J.detailSize[1]||5E8)/M[3],k=m>k?m:k;d("#magnifierLens").remove();
var n=d("<div id='magnifierLens' />").css({backgroundImage:"url("+g.generalImageUrls.zoomLensBackground+")",position:"absolute"});f.showMagnifierOnHover?b(n):n.css("cursor","pointer");e.updatePosition=function(){var a=[M[2]-h[0],M[3]-h[1]],b=0>=a[0]?.5:Math.max(0,Math.min(1,(F[0]-h[0]/2-M[0]-e.offset.left)/a[0])),c=0>=a[1]?.5:Math.max(0,Math.min(1,(F[1]-h[1]/2-M[1]-e.offset.top)/a[1])),d=M[0]+Math.round(b*a[0]),a=M[1]+Math.round(c*a[1]);n.get(0).style.left=d+"px";n.get(0).style.top=a+"px";return[b,
c]};e.destroy=function(){n.remove()};e.offset=c.offsetParent().offset();a(k);e.updatePosition();n.appendTo(c.parent());J.detailImage[0].complete||J.detailImage.load(function(){var b=J.detailImage.width()/M[2];a(b);e.updatePosition()})};L.preload=function(){H.preload(g.generalImageUrls.lensBackgroundUrl)};var X=function(){function b(){var a={};if("over"===g.location){var a=g.useClickZoom,f={},k=d("#leftCol"),n=d("#centerCol"),C=d("#rightCol"),q=d("#hover-zoom-end"),t=d("#actionPanelContainer"),u=e.isjQueryObjDefined(k)?
k.outerHeight():n.outerHeight();f.top=e.isjQueryObjDefined(k)?k.offset().top:n.offset().top;f.bottom=u+f.top;f.right=e.isjQueryObjDefined(C)?C.offset().left:t.offset().left;f.left=a?0:k.offset().left+k.outerWidth();e.isjQueryObjDefined(q)&&q.offset().top>f.bottom&&(f.bottom=q.offset().top);a=f}else"right"===g.location&&(a=c.offset(),a={left:a.left+c.outerWidth(),top:a.top,right:a.left+c.outerWidth()+400,bottom:a.top+400});g.minHeightElement&&(a.bottom=Math.max(a.bottom,a.top+d(g.minHeightElement).outerHeight()));
a.bottom=Math.min(a.bottom,d(r).scrollTop()+d(r).height());a.left+=m[0];a.top+=m[1];a.right+=m[2];a.bottom+=m[3];a.width=a.right-a.left;a.height=a.bottom-a.top;g.enhancedHoverOverlay&&e.isDefined(r.pageXOffset)&&(f=d(r).width(),a.width=f-a.left+r.pageXOffset-18,a.height-=14);l.css({left:a.left,top:a.top,width:a.width,height:a.height});h.rect=a;return h}function f(b){var c=new Image;h.detailSize=[0,0];c.onload=function(){h.detailSize=[c.width,c.height];k()};c.src=b.attr("src");if(0<c.width&&0<c.height)h.detailSize=
[c.width,c.height];else if(g.detailImageSize)h.detailSize=g.detailImageSize;else{b=a(c.src);var d=M[2]/M[3];b.SS||b.AA?(b=b.SS||b.AA,h.detailSize=[b,b]):b.SX?h.detailSize=[b.SX,Math.round(b.SX/d)]:b.SY?h.detailSize=[Math.round(b.SY*d),b.SY]:b.SL&&(h.detailSize=1<=d?[b.SL,Math.round(b.SL/d)]:[Math.round(b.SL*d),b.SL])}}var h=this,m=g.adjustment;d("#zoomWindow").remove();var n={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:g.zIndex};g.enhancedHoverOverlay&&(n.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",
n.border="1px solid #949494",n.borderColor="rgb(148,148,148)");var l=d("<div id='zoomWindow' />").css(n);g.fadeMagnifier&&l.fadeIn(200);g.useClickZoom&&(q?l.css("cursor",'url("'+g.zoomOutIcon+'"), auto'):(l.css("cursor","-webkit-zoom-out"),l.css("cursor","-moz-zoom-out"),l.css("cursor","zoom-out")));h.updateImage=function(a){a=d("<img id='detailImg' src='"+a+"'/>").css("position","absolute");h.detailImage&&h.detailImage.remove();l.append(a);d(document).trigger("updated.magnifier");h.detailImage=a;
f(h.detailImage)};h.refit=function(){b();f(h.detailImage);return h};g.fadeMagnifier?(h.show=function(){l.fadeIn(200);return h},h.hide=function(){l.fadeOut(200);return h}):(h.show=function(){l.show();return h},h.hide=function(){l.hide();return h});h.destroy=function(){l.remove();return h};h.getWindowSize=function(){return[h.rect.left,h.rect.top,h.rect.width,h.rect.height]};h.updateImage(K);b();l.appendTo(document.body)},Z=!1,S,R=!1,oa;H.preload=function(a){a=d.makeArray(a);for(var b=a.length,c=0;c<
b;c++)a[c]instanceof Array?H.preload(a[c]):"string"===typeof a[c]&&a[c]&&!I[a[c]]&&(I[a[c]]=new Image,I[a[c]].src=a[c])};H.changeImage=function(a,b){P&&l();K=b;c.attr("src",a);H.preload(a);M=[c.position().left,c.position().top,c.width(),c.height()];b&&("immediately"===g.preload?H.preload(b,!0):d(r).ready(function(){H.preload(b)}),J?J.updateImage(b):c.attr("data-old-hires",b))};H.destroy=function(){c.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");d(document).unbind("mousemove.magnifier");
D&&D.destroy();D=null;J&&J.destroy();J=null};H.detailImage=function(){return J.detailImage};H.suppressMagnifier=function(a){V=a};H.isEngaged=function(){return P};H.engageMagnifier=C;H.disengageMagnifier=l;c[0].complete?u():c.one("load",u);H.preload(c.attr("src"));if(g.preload){var fa=g.detailImageUrl,B=function(){H.preload(fa,!0);g.useClickZoom||L.preload()},ha=g.preload;ha.constructor!==Array&&(ha=[ha]);for(var da=0;da<ha.length;da++)if("immediately"===ha[da])B();else if(d(r)[ha[da]])d(r)[ha[da]](B);
else d(r).bind(ha[da],B)}return H}function g(){if(f.useHoverZoom){var a={adjustment:[0,0,1,1],generalImageUrls:f.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",zIndex:190,useHoverZoomIpad:f.useHoverZoomIpad,useHoverZoom:f.useHoverZoom,useClickZoom:f.useClickZoom,fadeMagnifier:f.fadeMagnifier,zoomOutIcon:f.staticImages.zoomOutCur,enhancedHoverOverlay:f.enhancedHoverOverlay};m&&(m.destroy(),m=F);var b=u.find(".image.item.selected img[data-old-hires]").not("[data-old-hires='']");
e.isjQueryObjDefined(b)&&(f.useClickZoom?(b.one("click.loadmagnifier touchstart.loadmagnifier",function(d){m=new c(b,a);m.engageMagnifier(d,!0)}),q?b.css("cursor",'url("'+f.staticImages.zoomInCur+'"), auto'):(b.css("cursor","-webkit-zoom-in"),b.css("cursor","-moz-zoom-in"),b.css("cursor","zoom-in"))):m=new c(b,a))}}var k,f,n,m,u,q=navigator.userAgent.match(/msie|trident/i);return function(a,b,c,d){k=this;f=a;n=d;k.render=function(a,b,c,d,e,f){u=c;m&&(m.destroy(),m=F)};k.update=function(a){};n.register("loadMagnifier",
g);n.register("resize",g)}});l.when("A","jQuery","imageBlockUtils").register("ImageBlockTwisterView",function(l,d,e){function h(a,b,d){a=(a=d?d:e.getColorFromState(b.getState().hovered_variations,c))&&""!==a?a:c.defaultColor;k.dispatch("updateView",{type:"swatchHover",data:{color:a}})}function b(a,b,d,h){a=(a=h?h:e.getColorFromState(b.getState().selected_variations,c))&&""!==a?a:c.defaultColor;a===g.getCurrentItem().color?"function"===typeof d&&d():k.dispatch("updateSelection",{type:"swatchClick",
data:{color:a},onload:d})}var a,c,g,k;return function(d,e,m,r){a=this;c=d;g=e;k=r;l.on("image-block-twister-swatch-hover",h);l.on("image-block-twister-swatch-click",b);a.render=function(a,b,c,d,e){};a.update=function(a){}}});l.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric").register("ImageBlockVideoView",function(C,d,e,h,b,a){function c(a,b,c,e){!p.autoplayVideo||M||p.useChromelessVideoPlayer?!h.isjQueryObjDefined(a.find(".a-button-selected"))&&(c=v.getCurrentItem(),
!e||p.prioritizeVideos||"chromeless-video"===c.type&&p.autoplayVideo)&&(e=f(c.color,0),-1!==e&&(b+=0,G.dispatch("updateModel",{data:{index:0,thumbnailIndex:b,variant:e.variant,type:p.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),b=a.find(".item").get(b),h.selectGivenThumbnail(d(b),a))):(h.selectGivenThumbnail(a.find("img:last"),a),h.fadeToThumbnail(a.find("img").length-1,t,a))}function g(a){if(!p.useChildVideos)return h.lazyLoadingRequired(v.getCurrentItem(),v,p)?void 0:p.videos;
if(p.colorToVideo[a])return p.colorToVideo[a];var c=p.colorToAsin[a];if(c&&c.asin){var e={};e.params={asin:c.asin,productGroupID:p.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:p.useChromelessVideoPlayer,isUDP:p.isUDP};e.success=function(b){var e=function(){if(b){var c=h.isDefined(p.colorToVideo.initial[0])?h.isDefined(p.colorToVideo.initial[0].banner):!1;p.displayVideoBanner&&c&&(b=d.merge([p.colorToVideo.initial[0]],b));p.colorToVideo[a]=b;c={type:"updatedData",data:v.getCurrentItem()};
G.dispatch("updateView",c)}};p.lazyLoadExperienceDisabled?e():l.when(h.rankedImagesReadyEvent(c.asin)).execute(function(){e()})};b.load("/gp/product/features/apparel-main-image/videos.html",e);return p.colorToVideo&&p.colorToVideo[a]}}function k(b,c,f,g){return e.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:b[0],streamingUrls:c.url,swfUrl:f.swfUrl,foresterMetadataParams:f.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},
bindings:{canplay:function(){var c=h.isjQueryObjDefined(b.find("video"))?"HTML5":"FLASH";a.postCountMetric("dppc_chromelessVideo:"+c)},playing:function(){b.parent().css("z-index",8)},videounsupported:function(){G.dispatch("selectThumbnail",0);a.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){G.dispatch("selectThumbnail",0);a.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){B.seek(0)}},cuePoints:[{values:c.durationSeconds-1,type:"position",callback:function(a,
c,e){a=e.durationSeconds-e.playheadTimeSeconds;b.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*a,.1,function(){b.parent().css({"background-color":"transparent","z-index":-1});G.dispatch("selectThumbnail",0);d(this).show().css("opacity",1)})}}]})}function f(a,b){var c;if(p.useChildVideos){if(!h.isDefined(p.colorToVideo))return-1;c=p.colorToVideo[a]}else c=p.videos;return h.isDefined(c)&&h.isDefined(c[b])&&h.isDefined(c[b].url)?c[b]:-1}function n(a){if("chromeful-video"===
a.type||"chromeless-video"===a.type){var b=f(a.color,a.index);D=p.displayVideoBanner&&h.isDefined(b.banner);if(-1===b)return-1;if("chromeful-video"===a.type){a=t.width()/t.height();var c=parseInt(b.videoWidth,10),e=parseInt(b.videoHeight,10);h.updateAspectRatio(a,c,e,x);B?(B.show(),h.loadMediaIntoAiry(B,b,J),E.show(),D&&(N||r(b))):(B=h.createAiryInstanceForChromeful(x,b,J,null,p.autoplayVideo,t,E,A),r(b),E.find("#videoCaption").text(p.staticStrings.playVideo));b=B;p.autoplayVideo&&b&&!M&&(h.toggleVideoCaption(E),
b.setVolume(0),b.show(),b.play(),M=!0)}else B?(B.show(),h.loadMediaIntoAiry(B,b,J),B.play(),D&&(N||r(b))):(B=k(x,b,J),r(b),B&&B.play());D?(h.repositionVideoBanner(t,x,z),z.addClass("show-banner"),t.css({height:t.height()+80}),d("#imageBlock").addClass("show-banner"),t.addClass("show-banner"),x.append(E)):z.removeClass("show-banner")}}function m(b,e,f){e=g(e);var k=b;h.isDefined(e)&&0<e.length&&p.alwaysIncludeVideo&&b===p.maxAlts&&(A.find(".item:last").remove(),b--);h.isDefined(e)&&(d.each(e,function(c,
d){if(b<p.maxAlts){var e=p.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",f={type:e,index:c,thumbnailIndex:b,variant:d.variant};p.displayVideoBanner&&p.isLargeSCLVideoThumbnail&&d.banner&&d.wideThumbUrl?h.createThumbnail(f,d.wideThumbUrl,A):h.createThumbnail(f,d.thumb,A);F||(F=!0,a.postCountMetric("chromeless-video"===e?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));b++}}),c(A,k,b,f));return b}function r(a){D?(z=H.find("#image_block_video_banner_temp").clone().removeClass("template").removeClass("aok-hidden").addClass("show-banner").attr("id",
"image_block_video_banner"),z.find("a").attr("href",encodeURI(a.banner.targetUrl+"?reftag="+a.banner.refTag)),z.find("img").attr("src",a.banner.logoUrl),z.find("span").text(a.banner.subtext),x.append(z),N=!0):N=!1}var q,p,v,G,A,x,E,t,z,H,B,J,D,F=!1,M=!1,N=!1;return function(a,b,c,e){q=this;p=a;v=b;G=e;J=p.airyConfig;p.colorToVideo={};p.colorToVideo[p.landingAsinColor]=p.colorToVideo[p.defaultColor]=p.videos;q.render=function(a,b,c,e,f,g){A=e;x=f.find("#main-video-container");E=x.parent().find("#video-canvas-caption");
t=d("#main-image-container");H=x.parent().find("#banner-outer-container");z=x.parent().find("#image_block_video_banner");p.useChromelessVideoPlayer||x.addClass("chromeful-container");a=m(b,a,g);n(v.getCurrentItem());return a};q.update=function(a){var b=a.data;"ingress"!==b.type&&B&&(B.hide(),x.parent().css("z-index",-1),E.hide(),h.isDefined(z)&&z.removeClass("show-banner"));if("swatchHover"===a.type)b.color===v.getCurrentItem().color?n(v.getCurrentItem()):a.captured||h.lazyLoadingRequired(b,v,p)&&
!h.lazyLoadOnHoverEnabled(p)&&n(v.getCurrentItem());else if("chromeful-video"===b.type||"chromeless-video"===b.type)n(b),p.usePeekHover&&"click"!==a.type||h.selectGivenThumbnail(a.$declarativeParent,A)}}});l.when("A","a-modal","a-tooltip","jQuery","imageBlockUtils","postMetric").register("ImageBlockImmersiveView",function(l,d,e,h,b,a){function c(a){return a.hiRes||a.large||a.main[a.main.length-1]}function g(a,c){var d=l.copy(a);if(b.isDefined(a)&&a.length>c){try{for(var e=-1,f=0;f<a.length;f++){var g=
a.charAt(f);if(" "===g||"."===g||"?"===g||";"===g||","===g||":"===g)e=f;if(f===c-4){d=a.substring(0,-1===e?f:e);break}}}catch(h){d=a.substring(0,c-3)}d+="..."}return d}function k(a){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");var b=a.lastIndexOf(".");return a="_"===a.charAt(b-1)?a.substring(0,b-1)+"_AA50_"+a.substring(b):a.substring(0,b)+"._AA50_"+a.substring(b)}function f(){K.find("#ivTitle").click(function(){V.hide()})}
function n(a,b){var c=parseInt(a.css(b),10);return isNaN(c)?0:c}function m(){var a=K.find("#ivStage"),b=V.$container.find(".a-popover-wrapper"),c=b.find(".a-popover-inner"),b=b.height()-n(c,"padding-top")-n(c,"padding-bottom");K.css("height",b);var c=K.find("#ivTitle").outerHeight(!0),d=K.find("#ivVariationSelection").outerHeight(!0),e=K.find("#ivMediaSelection").outerHeight(!0),f=K.find("#ivThumbs"),g=n(f,"margin-top")+n(f,"margin-bottom");f.css("height",b-c-d-e-g);K.find("#ivLargeImage").css("height",
b);a.css("width",K.width()-n(K,"padding-left")-n(K,"padding-right")-K.find("#ivThumbColumn").width()-n(a,"margin-left")-n(a,"margin-right"))}function u(){K.find("#ivMediaSelect").change(function(){var a=h(this).val();"all"===a?(K.find("#ivVideoList").hide(),K.find("#ivThumbs").show(),K.find(".ivThumbVideo").show(),"chromeful-video"===S.type&&K.find("#ivVideo_"+S.index).click()):"images"===a?(K.find("#ivVideoList").hide(),K.find("#ivThumbs").show(),K.find(".ivThumbVideo").hide(),"chromeful-video"===
S.type&&K.find("#ivImage_0").click()):"videos"===a&&(K.find("#ivVideoList").show(),K.find("#ivThumbs").hide(),"image"===S.type?K.find("#ivVideoList_0").click():K.find("#ivVideoList_"+S.index).click())})}function q(){var a=K.find("#ivStage").find("#ivLargeImage"),b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var e=d.width(),f=d.height();0<d.length&&(d[0].naturalWidth&&(e=d[0].naturalWidth),d[0].naturalHeight&&(f=d[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,f=
0===f?1:f,g=Math.min(b/e,c/f),h=f*g,k=e*g;1>g?(da?a.css("cursor","url('"+N.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),ga=!0):ga=!1;e=Math.min(k,e);f=Math.min(h-20,f);d.css({"margin-top":(c-f)/2,"margin-left":(b-e)/2,height:f,width:e});a.css("visibility","visible");sa=!1}function p(a){var b=K.find("#ivLargeImage");b.css("visibility","hidden");b.empty();b.animate({opacity:1},200);b.append(a);q()}function v(a){R&&R.hide();
K.find("#ivLargeVideo").css("display","none");K.find("#ivLargeImage").css("display","block");var d;"hero-image"===a?b.isDefined(O)&&(d=c(O[S.index])):b.isDefined(U)&&(d=c(U[S.index]));if(b.isDefined(d)){K.find(".fullscreen").remove();var e=h("<img>").attr("src",d).addClass("fullscreen"),f=K.find("#ivLargeImage");f.animate({opacity:.4},200,function(){e.load(function(){p(e)});if(e[0].complete)p(e);else{f.empty();var a=(f.height()-104)/2,b=(f.width()-80)/2;h("<img>").attr("src",N.staticImages.spinner).css({position:"relative",
top:a+"px",left:b+"px"}).appendTo(f)}})}}function G(){var a=parseInt(S.index,10)+1;a>=Q.length||K.find("#ivVideo_"+a).click()}function A(a,c){fa||(fa=ha.find("#image_block_video_banner_temp"),fa=fa.clone().removeClass("template").removeClass("aok-hidden").attr("id","immersive_view_video_banner").addClass("show-banner"),fa.find("a").attr("href",encodeURI(c.banner.targetUrl+"?reftag="+c.banner.refTag)),fa.find("img").attr("src",c.banner.logoUrl),fa.find("span").text(c.banner.subtext));var d=K.find("#ivStage");
a.addClass("show-banner");fa.addClass("show-banner");fa.appendTo(a);b.repositionVideoBanner(d,a,fa)}function x(){var a;b.isDefined(Q)&&(a=Q[S.index]);if(b.isDefined(a)){K.find("#ivLargeImage").css("display","none").empty();var c=K.find("#ivLargeVideo").css("display","block");R?(R.isDetached()&&R.attach(c[0]),b.loadMediaIntoAiry(R,a,oa),R.show(),R.play({isAsync:!0}),N.displayVideoBanner&&b.isDefined(a.banner)?A(c,a):N.displayVideoBanner&&b.isDefined(fa)&&(fa.removeClass("show-banner"),K.find("#ivLargeVideo").removeClass("show-banner").css({width:"",
height:""}))):(R=b.createAiryInstanceForChromeful(c,a,oa,"ImmersiveView"),N.displayVideoBanner&&b.isDefined(a.banner)?A(c,a):N.displayVideoBanner&&b.isDefined(fa)&&(fa.removeClass("show-banner"),K.find("#ivLargeVideo").removeClass("show-banner").css({width:"",height:""})),oa.enableContinuousPlay&&R.bind("ended",G),R.play({isAsync:!0}))}}function E(){S=I.getCurrentItem();var a;a="hero-image"===S.type?K.find("#ivHeroImage_"+S.index):"image"===S.type?K.find("#ivImage_"+S.index):"chromeful-video"===S.type||
"chromeless-video"===S.type?K.find("#ivVideo_"+S.index):b.isDefined(O)?K.find("#ivHeroImage_"+S.index):K.find("#ivImage_"+S.index);b.isjQueryObjDefined(a)||(a=K.find("#ivImage_0"));t(a)}function t(a){K.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(S.type="chromeful-video",S.index=a.attr("id").split("_")[1],x()):(a.hasClass("ivHeroImage")?S.type="hero-image":S.type="image",S.index=a.attr("id").split("_")[1],v(S.type))}function z(){K.delegate(".ivThumb",
"click",function(){var a=h(this);t(a)});K.delegate(".ivThumbVideoListOuter","click",function(){K.find(".ivThumbVideoListOuter").removeClass("selected");var a=h(this);a.addClass("selected");S.type="chromeful-video";S.index=a.attr("id").split("_")[1];x()})}function H(){R&&!R.isDetached()&&(oa.volume=R.getVolume(),R.detach(),!document.all||r.atob||document.addEventListener||(R=null));K.find("#ivLargeImage").empty()}function B(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function J(a){var b=va.top-(a.pageY-
ka[1])*W;a=B(va.left-(a.pageX-ka[0])*W,T.left);b=B(b,T.top);K.find(".fullscreen").css({left:a,top:b})}function D(){K.delegate("#ivLargeImage","click",function(a){if(sa)q();else if(ga){K.find(".fullscreen").removeAttr("style");if(ga){var b=K.find("#ivLargeImage"),c=b.find(".fullscreen");da?b.css("cursor","url('"+N.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));sa=!0;var d=K.find("#ivLargeImage");T.left=d.width()-c.width();
T.top=d.height()-c.height();var d=b.height()/2,e=b.width()/2;ka=[b.offset().left+e,b.offset().top+d];va.top=d-c.height()/2;va.left=e-c.width()/2;c.css({position:"relative",left:va.left,top:va.top});W=Math.max(c.height()/b.height(),c.width()/b.width())}J(a)}});K.delegate("#ivLargeImage","mousemove",function(a){sa&&J(a)})}function F(){var c;(c=!N.useIV)||(c=I.getCurrentItem().color,c=N.colorImages&&N.colorImages[c]&&0<N.colorImages[c].length?!0:!1,c=!c);if(!c){a.postCountMetric("dppc_immersiveViewOpened");
if(b.isDefined(V))V.show();else{c=h("#auiImmersiveViewDiv");var e=h(r).height()-150,f=h(r).width()-75;V=d.create(c,{name:"immersiveView",activate:"onclick",width:f,height:e,popoverLabel:"ImmersiveView",hideHeader:!0});c.click()}if(aa){K=h("#ivMain");c=I.getCurrentItem().color;U=N.colorImages[c];O=N.heroImage[c];Q=N.useChildVideos?N.colorToVideo[c]:N.videos;S=I.getCurrentItem();L=Z=X=0;b.isDefined(O)&&(L=O.length);b.isDefined(U)&&(X=U.length);b.isDefined(Q)&&(Z=Q.length);c=K.find("#ivTitle");c.attr("title",
N.title);c.text(g(N.title,45));if(b.isDefined(r.DetailPage)&&b.isDefined(r.DetailPage.StateController)){c=K.find("#ivVariationSelection");c.empty();var e=r.DetailPage.StateController.getState(),f=e.variation_label_order,m;for(m in f)if(f.hasOwnProperty(m)){var n=f[m],p=e.selected_variations[n],n=e.variation_display_labels[n];p&&h("<div/>").addClass("ivVariations").text(n+":"+p).appendTo(c)}}m=K.find("#ivMediaSelect");0===X||0===Z?(m.parent().hide(),K.find("#ivThumbs").addClass("noMediaSelection")):
(m.empty(),h("<option/>").attr("value","all").prop("selected",!0).text(N.staticStrings.allMedia+" ("+(L+X+Z)+")").appendTo(m),h("<option/>").attr("value","images").text(N.staticStrings.images+" ("+(L+X)+")").appendTo(m),h("<option/>").attr("value","videos").text(N.staticStrings.videos+" ("+Z+")").appendTo(m),m.parent().show(),m.val("all"));m=K.find("#ivThumbs");m.find(".ivRow").not(".placeholder").remove();c=L+X+Z;for(f=e=0;e<c;)for(p=m.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(m),
n=0;3>n&&e<c;n++,e++,f++)if(f<L){var q=O[e].thumb,t=m.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+e).appendTo(p);t.find(".ivThumbImage").css("background",'url("'+k(q)+'") center no-repeat')}else if(f>=L&&f<X+L)q=U[e-L].thumb,t=m.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(e-L)).appendTo(p),t.find(".ivThumbImage").css("background",'url("'+k(q)+'") center no-repeat');else if(q=Q[e-X-L],t=m.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id",
"ivVideo_"+(e-X-L)).appendTo(p),t.find(".ivThumbImage").css("background",'url("'+q.thumbUrl+'") center no-repeat'),b.isDefined(q)){var u={position:"triggerTop"},v=K.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");v.find(".ivVideoPopoverTitle").text(q.title);v.find(".ivVideoPopoverDuration").text(q.durationTimestamp);u.inlineContent=v[0];l.declarative.create(t,"a-tooltip",u)}m=K.find("#ivVideoList");m.find(".ivThumbVideoListOuter").not(".placeholder").remove();
c=m.find(".placeholder");for(e=0;e<Z;e++)f=Q[e],p=c.clone().removeClass("placeholder").appendTo(m),p.attr("id","ivVideoList_"+e),p.find(".ivThumbImage").css("background",'url("'+f.thumbUrl+'") center no-repeat'),p.find(".ivThumbTitle").text(f.title),p.find(".ivThumbDuration").text(f.durationTimestamp);oa=N.airyConfig;aa=!1;ca()}}}var M,N,I,P,V,K,O,U,Q,L,X,Z,S,R,oa,fa,ha,da=navigator.userAgent.match(/msie|trident/i),aa=!0,sa=!1,ga=!1,T={},va={},W,ka,ca=l.once(function(){u();z();D();l.on("a:popover:afterUpdatePosition:immersiveView",
m);l.on("a:popover:afterShow:immersiveView",E);l.on("a:popover:afterHide:immersiveView",H);f()});return function(a,b,c,d){M=this;N=a;I=b;P=d;M.render=function(a,b,c,d,e,f){aa=!0;ha=e};M.update=function(a){};P.register("imageClick",F)}});l.when("A","jQuery","imageBlockUtils").register("ImageBlockLoader",function(l,d,e){return{load:function(d,b){b=b||{};b.timeout=b.timeout||4E3;l.ajax(d,b)}}});l.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF").register("imageBlockUtils",
function(l,d,e,h,b,a){function c(a){return null!==a&&"undefined"!==typeof a}function g(a){var b=0;d.each(a,function(a,c){var d=parseInt(c[1],10);d>b&&(b=d)});return b}function k(a){var b=0;d.each(a,function(a,c){var d=parseInt(c[0],10);d>b&&(b=d)});return b}function f(a,b,c){b=b.width();if(c.naturalMainImageSize)return b;a=g(a);0<a&&(b=Math.min(b,a));return b}function n(a,b,c){b=b.height();if(c.naturalMainImageSize)return b;a=k(a);0<a&&(b=Math.min(b,a));return b}function m(a){var b;d.each(a,function(a,
d){c(b)||(b=d[1]/d[0])});return b||1}function u(a,b,c){b.fadeTo(500,0,function(){p(a,c);b.fadeTo(500,1)})}function q(a){a&&a.toggle()}function p(a,b){var e=b.find("img");c(e[a])&&d(e[a]).click()}function v(a,b){H[a]=b?b:H[a];return H[a]}function G(a,b,e){e=e||z;e=e.colorImages;if(1>e.length||!c(e[a])||!c(b))return-1;var f=-1;d.each(e[a],function(a,c){c.variant===b&&(f=a)});return f}function A(a,b,e){e=e||z;e=e.colorImages;return!(c(e)&&c(e[a])&&c(e[a][b])&&c(e[a][b].main))||1>d.map(e[a][b].main,function(a,
b){return b}).length?-1:e[a][b]}function x(a,b,c,d){d.parent().css("z-index",2);0!==c&&0!==b&&(b/=c,a>b?d.css("width",b/a*100+"%"):d.css("height",a/b*100+"%"))}var E,t,z=d.extend(!0,{},b,a),H={};return{isDefined:c,isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:m,getMaxHeightOfMainImage:n,getMaxWidthOfMainImage:f,getMaxDimensionsOfMainImage:function(a,b,c){var d=n(a,b,c);b=f(a,b,c);a=m(a);c=b/a;b=Math.min(b,d*a);d=Math.min(d,c);return[d,b]},getContainerHeight:function(a,b,d){var e=
a.get(0);a=0;if(c(e)){a=e.offsetWidth/b;a=Math.min(a,d);var f;b=z.mainImageHeightPartitions;d=z.mainImageMaxSizes;if(c(d)&&c(b)){for(var g=0,h=r.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,e=0;e<b.length;e++)h>b[e]&&(g=e+1);d.length>=g&&(f=d[g])}c(f)&&(a=Math.min(f[1],a))}return a},getColorFromState:function(a,b){if(a){b=b||z;var c="";d.each(b.visualDimensions,function(b,d){a[d]&&(c+=" "+a[d])});return c&&c.substring(1)}},createThumbnail:function(a,b,c){var d=c.find(".template").clone().removeClass("template").addClass("item"),
e=document.createElement("img");e.src=b;d.find(".placeHolder").replaceWith(e);(b=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===b&&d.addClass("heroImageThumbnail");l.declarative.create(d,"thumb-action",a);c.append(d)},selectGivenThumbnail:function(a,b){var c=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(a,b,c,f,g,k,m,n){var l=d.extend({},
c.foresterMetadataParams);null!==f&&(l.method+="."+f);var p=[];b.disabledViewIds&&(p=b.disabledViewIds);return e.embed({parentElement:a[0],streamingUrls:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,swfUrl:c.swfUrl,foresterMetadataParams:l,backgroundColor:"transparent",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl},videoAds:c.videoAds,bindings:{play:function(){"ImmersiveView"===f?E||(E=!0,h.postCountMetric("dppc_chromefulVideoPlayedIV")):
t||(t=!0,h.postCountMetric("dppc_chromefulVideoPlayedPV"))}},cuePoints:[{values:b.durationSeconds-1,type:"position",callback:function(a,b,c){g&&(u(0,k,n),q(m))}}],disabledViewIds:p})},loadMediaIntoAiry:function(a,b,c){a&&a.getMediaSourceInfo()!==b.url&&a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}})},showUnavailable:function(a){a&&(d("#imageBlock .unvailableVariation").html(a),
d("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){d("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:u,toggleVideoCaption:q,selectThumbnail:p,spinner:function(a,b){var c=d("#imageBlock .a-spinner").parent();0===c.length&&(c=d("<div></div>").append(d("<span></span>").addClass("a-spinner").addClass("a-spinner-medium")),a.append(c),c.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)",
"z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));b?c.show():c.hide();return c},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+a},ajaxState:v,getIndexForVariant:G,getImageHash:A,lazyLoadingRequired:function(a,b,c){b=Math.max(G(a.color,b.getCurrentItem().variant,c),0);b=-1!==A(a.color,b,c);a=c.colorToAsin[a.color]&&c.colorToAsin[a.color].asin;a=!a||"success"!==v(a);return!c.lazyLoadExperienceDisabled&&
!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:x,repositionVideoBanner:function(a,b,c,d){setTimeout(function(){var c=a.width()/a.height();x(c,16,9,b)},d||0)}}});l.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils","postMetric").register("ImageBlockHeroImageView",function(l,d,e,h,b){function a(a,b,c,f){if(!e.isjQueryObjDefined(a.find(".a-button-selected"))){var k=v.getCurrentItem();if(!f||"chromeless-video"!==k.type||!p.autoplayVideo){f=
0;if("hero-image"===k.type){f=g(k.color,k.variant);if(-1===f)return;f=-1!==f?f:0}var m=b+f;m>=c&&(f=0,m=b);b=h.getHeroImageHash(p,k.color,f);-1!==b&&(G.dispatch("updateModel",{data:{index:f,thumbnailIndex:m,variant:b.variant,type:"hero-image"}}),b=a.find(".item").get(m),e.selectGivenThumbnail(d(b),a))}}}function c(b,c,f){if("hero-video"===v.getCurrentItem().type)return b;c=p.heroImage&&p.heroImage[c];var g=b;e.isDefined(c)&&(d.each(c,function(a,c){b<p.maxAlts&&(e.createThumbnail({type:"hero-image",
index:a,thumbnailIndex:b,variant:c.variant},c.thumb,A),b++)}),a(A,g,b,f));return b}function g(a,b){var c=p.heroImage;if(1>c.length||!e.isDefined(c[a])||!e.isDefined(b))return-1;var f=-1;d.each(c[a],function(a,c){c.variant===b&&(f=a)});return f}function k(){if(x.length&&p.repositionHeroImage){var a=h.getHeroDimParams(p,v.getCurrentItem()),b;e.isDefined(a)&&(b=e.isDefined(a.xPos)?a.xPos+"px "+a.yPos+"px ":"center "+a.yPos+"px ",x.css({"background-position":b,"background-size":a.width+"px "+a.height+
"px ","max-width":a.width+"px ","min-height":a.height+"px ",filter:"","-ms-filter":""}))}}function f(a,b,c,d){if(x.length&&a&&b){if("function"===typeof c||d){var f=new Image;f.onload=d?function(){x.css("background-image",'url("'+a+'")')}:c;f.src=a}c=b[1];var f=b[0],g;d||x.css({"background-image":'url("'+a+'")'});p.repositionHeroImage&&(b=h.getHeroDimParams(p,v.getCurrentItem(),b),e.isDefined(b)&&(c=b.width,f=b.height,g=e.isDefined(b.xPos)?b.xPos+"px "+b.yPos+"px ":"center "+b.yPos+"px "));x.css({"background-position":g,
"background-size":c+"px "+f+"px ","max-width":c+"px ","min-height":f+"px ",filter:"","-ms-filter":""})}}function n(a,b,c,e){a=h.getHeroImageHash(p,a,b);if(-1===a)return-1;b=d.map(a.main,function(a,b){return b})[0];f(b,a.main[b],c,e)}function m(a,b,c){if("hero-image"!==a.type)return-1;var d=g(a.color,v.getCurrentItem().variant),d=-1!==d?d:0;if(-1===h.getHeroImageHash(p,a.color,d))return-1;var e=v.getCurrentItem();a.thumbnailIndex=e.thumbnailIndex;a.type=e.type;a.variant=e.variant;a.index=d;r(a,b,c)}
function r(a,b,c){var d=h.getHeroImageHash(p,a.color,a.index),e;e=a&&E&&l.equals(a,E)?!0:!1;E||(E=a);if(!e&&a||b)n(a.color,a.index,b,c),E=a;x.removeClass("hide-background");l.trigger("dp:image-block:update",d)}var q,p,v,G,A,x,E={};return function(a,b,f,g){q=this;p=a;v=b;G=g;p.heroImage[p.landingAsinColor]=p.heroImage[p.defaultColor];q.render=function(a,b,e,f,g,h,k){A=f;x=d("#heroImage");a=c(b,a,h);m(v.getCurrentItem(),k,h);return a};q.update=function(a){var b=a.data;"ingress"!==b.type&&x.addClass("hide-background");
"swatchHover"===a.type?a.captured||(b.type=v.getCurrentItem().type,-1!==m(b)&&(a.captured=!0)):"hero-image"===b.type&&(r(b),"click"!==a.type&&p.usePeekHover||e.selectGivenThumbnail(a.$declarativeParent,A))};G.register("resize",k)}});l.when("A","jQuery","imageBlockUtils","postMetric","ImageBlockAltImageView").register("ImageBlockAltImageIngressView",function(l,d,e,h,b){function a(a){a=k.heroImage[a];var b=0;a&&(b=a.length);return b}function c(a){n.find(".item").eq(a).appendTo(n).addClass("vse-scl-thumbnail")}
var g,k,f,n;return function(b,d,h,p){g=this;k=b;f=p;g.render=function(b,d,f,h,m,p,q){n=h;g=this;f=k.maxAlts;h=d;m=k.colorImages[b]?k.colorImages[b].length:0;p=k.useChildVideos&&k.colorToVideo[b]?k.colorToVideo[b].length:k.videos?k.videos.length:0;m=m+p+a(b);m>f&&(p=m-f,h=d,m=n.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),p+="+",q={type:"ingress",index:0,thumbnailIndex:h,variant:""},m.find("#altIngressText").append(p),l.declarative.create(m,
"thumb-action",q),n.append(m),h=h++);m=e.isDefined(k.videos[0])?e.isDefined(k.videos[0].banner):!1;k.displayVideoBanner&&k.isLargeSCLVideoThumbnail&&m&&(b=(k.colorImages[b]?k.colorImages[b].length:0)+a(b),b>=f&&k.alwaysIncludeVideo?c(d-1):b<f&&c(b));return h};g.update=function(a){"ingress"===a.data.type&&"click"===a.type&&f.dispatch("imageClick",a)}}});l.when("A","jQuery","imageBlockUtils").register("ImageBlockState",function(l,d,e){return function(d,b,a){this.getImageHash=function(b){var g=
a.getCurrentItem();b=e.getIndexForVariant(g.color,b||"MAIN",d);return e.getImageHash(g.color,b,d)};this.onImageUpdateForTwister=function(a){b.register("updateSelection",function(b){"swatchClick"===b.type&&"function"===typeof a&&a()})}}});l.when("A","jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(l,d,e){function h(a,b){var d;if(b.repositionHeroImage){d=a[1];var e=a[0];if(768>=(r.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))d*=.7,e*=
.7;else{var h=((r.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,h=Math.max(Math.min(h,1),0);d*=.7+.3*h;e*=.7+.3*h}d=[d,e]}return d}function b(a,b,d){var f;if(d.repositionHeroImage){var h=r.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;d=d.heroFocalPoint;if(e.isDefined(d)){f=Math.max((h-Math.min(1500,a))/2,0);var m=Math.max((h-a)/2,0);f-=m;h=Math.max(Math.min(h,1500),1024);f=f+(h-420-23)/2-a/b[1]*d}}return f}function a(a,b,h){a=
a.heroImage;return!(e.isDefined(a)&&e.isDefined(a[b])&&e.isDefined(a[b][h])&&e.isDefined(a[b][h].main))||1>d.map(a[b][h].main,function(a,b){return b}).length?-1:a[b][h]}return{getHeroImageHash:a,getHeroDimParams:function(c,g,k){if(c.repositionHeroImage){if(!e.isDefined(k)){k=a(c,g.color,g.index);if(-1===k)return;g=d.map(k.main,function(a,b){return b})[0];k=k.main[g]}g=h(k,c);c=b(g[0],k,c);return{height:g[1],width:g[0],xPos:c,yPos:75}}}}})})})(function(){var l=window.AmazonUIPageJS||window.P,r=l._namespace||
l.attributeErrors;return r?r("DetailPageImageBlockAssets"):l}(),window);